<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Loja Real | Pix & Chat</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root { --primary: #8257e5; --bg: #09090a; --card: #121214; --text: #ffffff; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { width: 100%; max-width: 500px; }
        .card { background: var(--card); padding: 20px; border-radius: 8px; border: 1px solid #29292e; text-align: center; }
        .price { color: #00b37e; font-size: 32px; font-weight: bold; margin: 10px 0; }
        .btn { background: var(--primary); color: white; border: none; padding: 15px; width: 100%; border-radius: 4px; font-weight: bold; cursor: pointer; text-decoration: none; display: block; }
        
        /* Estilo do Chat */
        #chat-container { display: none; background: var(--card); border: 1px solid var(--primary); border-radius: 8px; margin-top: 20px; }
        #messages { height: 300px; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 8px 12px; border-radius: 6px; max-width: 80%; font-size: 14px; }
        .vendedor { background: #29292e; align-self: flex-start; }
        .comprador { background: var(--primary); align-self: flex-end; }
        .input-area { display: flex; border-top: 1px solid #29292e; padding: 10px; }
        input { flex: 1; background: #000; border: 1px solid #29292e; color: white; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>

    <div class="container">
        <div id="produto" class="card">
            <img src="https://via.placeholder.com/100" style="border-radius: 50%;">
            <h2>Produto Digital</h2>
            <p>Entrega automática via chat</p>
            <div class="price">R$ 50,00</div>
            
            <a href="COLE_SEU_LINK_DO_MERCADO_PAGO_AQUI" class="btn" onclick="mostrarChat()">PAGAR COM PIX</a>
            <p style="font-size: 12px; margin-top: 10px; color: #888;">Após pagar, o chat abaixo será liberado.</p>
        </div>

        <div id="chat-container">
            <div style="background: var(--primary); padding: 10px; font-weight: bold;">Chat com Vendedor</div>
            <div id="messages"></div>
            <div class="input-area">
                <input type="text" id="userInput" placeholder="Digite sua mensagem...">
                <button onclick="sendMessage()" style="background: #00b37e; border:none; color:white; padding:10px; cursor:pointer;">Enviar</button>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURAÇÃO DO FIREBASE (Você pega isso no site do Firebase)
        const firebaseConfig = {
            apiKey: "SUA_API_KEY",
            authDomain: "SEU_PROJETO.firebaseapp.com",
            databaseURL: "https://SEU_PROJETO.firebaseio.com",
            projectId: "SEU_PROJETO",
            storageBucket: "SEU_PROJETO.appspot.com",
            messagingSenderId: "ID",
            appId: "APP_ID"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function mostrarChat() {
            // Na vida real, você usaria um Webhook, mas aqui simulamos a liberação
            document.getElementById('chat-container').style.display = 'block';
        }

        // Enviar mensagem para o Banco de Dados
        function sendMessage() {
            const text = document.getElementById('userInput').value;
            if(text) {
                db.ref("chat_pedido_1").push({
                    user: "comprador", // Mude para "vendedor" no seu painel
                    text: text,
                    timestamp: Date.now()
                });
                document.getElementById('userInput').value = "";
            }
        }

        // Ler mensagens em tempo real
        db.ref("chat_pedido_1").on("child_added", (snapshot) => {
            const data = snapshot.val();
            const div = document.createElement("div");
            div.className = "msg " + data.user;
            div.innerText = data.text;
            document.getElementById("messages").appendChild(div);
            document.getElementById("messages").scrollTop = document.getElementById("messages").scrollHeight;
        });
    </script>
</body>
</html>
